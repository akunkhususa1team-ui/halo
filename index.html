<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Untuk Aili ğŸ’˜</title>
    <style>
        :root{ --pink:#ff3d7f; --soft:#ff9bbb; --dark:#120012; --card:rgba(255,255,255,.14); }
        *{margin:0;padding:0;box-sizing:border-box}
        html,body{width:100%;height:100%;font-family:"Segoe UI",Arial,sans-serif; overflow:hidden;}
        body{ background:radial-gradient(circle at top,var(--soft),var(--dark)); display:flex; flex-direction:column; color:white; transition: 0.5s; }

        /* Opening Screen */
        #opening{ position:fixed; inset:0; background:rgba(0,0,0,.9); backdrop-filter:blur(20px); display:grid; place-items:center; font-size:24px; cursor:pointer; z-index:9999; transition:0.8s; }
        .fade-out{opacity:0; pointer-events:none}

        /* Container & Card */
        .container{ flex:1; display:flex; align-items:center; justify-content:center; padding:15px; z-index:10; transition: opacity 0.5s; }
        .card{ 
            width:100%; max-width:380px; background:var(--card); backdrop-filter:blur(15px); 
            border-radius:30px; padding:25px 20px; text-align:center; 
            box-shadow:0 20px 50px rgba(0,0,0,0.3); border:1px solid rgba(255,255,255,0.1);
            position: relative; z-index: 100;
        }

        /* Photo Styles */
        .photo-wrapper { width: 180px; height: 180px; margin: 0 auto; position: relative; z-index: 110; transition: 0.6s cubic-bezier(0.4, 0, 0.2, 1); }
        .photo { width: 100%; height: 100%; border-radius: 20px; object-fit: cover; box-shadow: 0 0 25px var(--pink); cursor: pointer; }
        .is-portrait { width: 240px !important; height: 320px !important; }

        .info-box { margin: 15px 0; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); text-align: left; }
        .info-item { font-size: 13px; margin-bottom: 8px; display: flex; align-items: center; gap: 10px; }

        h2#question { font-size: 18px; font-weight: 400; margin: 20px 0; }
        .buttons { position: relative; width: 100%; height: 80px; display: flex; justify-content: center; align-items: center; gap: 20px; }

        button { padding: 12px 25px; border-radius: 15px; border: none; cursor: pointer; font-weight: bold; font-size: 16px; touch-action: manipulation; transition: 0.2s; }
        #yesBtn { background: var(--pink); color: white; box-shadow: 0 5px 15px var(--pink); z-index: 1000; position: relative; }
        #noBtn { background: #444; color: white; z-index: 999; position: relative; }

        /* Effects */
        .sparkle { position: fixed; pointer-events: none; z-index: 2000; animation: fly 1s forwards; font-size: 20px; }
        @keyframes fly {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
            100% { transform: translate(calc(-50% + var(--x)), calc(-50% + var(--y))) scale(1.6); opacity: 0; }
        }

        .running { background: var(--pink); padding: 12px 0; overflow: hidden; white-space: nowrap; flex-shrink: 0; position: relative; z-index: 100; }
        .running span { display: inline-block; padding-left: 100%; animation: scroll 20s linear infinite; font-weight: bold; }
        @keyframes scroll { to { transform: translateX(-100%); } }
        
        .heart-rain { position: fixed; top: -20px; animation: fall linear forwards; pointer-events: none; z-index: 5; }
        @keyframes fall { to { transform: translateY(110vh); opacity: 0; } }

        .balloon { position: fixed; bottom: -50px; z-index: 1; pointer-events: none; }
    </style>
</head>
<body>

    <div id="opening">âœ¨ Klik untuk Aili âœ¨</div>
    <div id="dismiss-overlay" style="position:fixed; inset:0; display:none; z-index:50;"></div>

    <div id="app-wrapper" style="display: contents;">
        <div class="container" id="mainCon">
            <div class="card" id="mainCard">
                <h1>Untuk Aili ğŸ’–</h1>
                <div class="photo-wrapper" id="pWrapper">
                    <img src="foto.jpg" class="photo" id="mainPhoto" alt="Aili">
                </div>

                <div class="info-box">
                    <div class="info-item">ğŸ“ <span><b>Location:</b> Secret / Your Choice</span></div>
                    <div class="info-item">ğŸ“… <span><b>Date:</b> Weekend ini?</span></div>
                    <div class="info-item">âœ¨ <span><b>Outfit:</b> Yang bikin kamu nyaman</span></div>
                </div>

                <h2 id="question">Mau jalan sama aku nggak? ğŸ¥º</h2>
                <div class="buttons">
                    <button id="yesBtn">Yes ğŸ˜</button>
                    <button id="noBtn">No ğŸ˜œ</button>
                </div>
            </div>
        </div>

        <div class="running" id="bottomMarquee">
            <span id="runText">ğŸ’˜ ini sebenernya so so an so sweet aja ğŸ’˜ Happy Valentine tapi aku tidak merayakan, ini cuma iseng iseng bikin gini an wkwk ğŸ’˜ Makasih udah mau buka ini ğŸ’˜ Have a great day! ğŸ’˜</span>
        </div>
    </div>

    <audio id="mainAudio" preload="auto"></audio>

<script>
    const noBtn = document.getElementById("noBtn");
    const yesBtn = document.getElementById("yesBtn");
    const pWrapper = document.getElementById("pWrapper");
    const photo = document.getElementById("mainPhoto");
    const opening = document.getElementById("opening");
    const mainAudio = document.getElementById("mainAudio");
    const overlay = document.getElementById("dismiss-overlay");
    const appWrapper = document.getElementById("app-wrapper");

    const lagu1 = "Timur.mp3";
    const lagu2 = "MyEverything.mp3";

    function createSparks(x, y, isFirework = false) {
        const particles = isFirework ? ['ğŸ’¥', 'âœ¨', 'ğŸ’–', 'â­', 'ğŸŒ¸'] : ['âœ¨', 'â­', 'ğŸ’–', 'ğŸŒ¸'];
        const count = isFirework ? 20 : 12;
        for (let i = 0; i < count; i++) {
            const s = document.createElement('div');
            s.className = 'sparkle';
            s.innerHTML = particles[Math.floor(Math.random() * particles.length)];
            s.style.left = x + 'px'; 
            s.style.top = y + 'px';
            const angle = Math.random() * Math.PI * 2;
            const dist = isFirework ? (Math.random() * 200 + 50) : (Math.random() * 100 + 50);
            s.style.setProperty('--x', Math.cos(angle) * dist + 'px');
            s.style.setProperty('--y', Math.sin(angle) * dist + 'px');
            document.body.appendChild(s);
            setTimeout(() => s.remove(), 1000);
        }
    }

    photo.onclick = (e) => {
        const isZoomed = pWrapper.classList.toggle("is-portrait");
        overlay.style.display = isZoomed ? "block" : "none";
        createSparks(e.clientX, e.clientY);
    };

    overlay.onclick = () => {
        pWrapper.classList.remove("is-portrait");
        overlay.style.display = "none";
    };

    function moveNo() {
        noBtn.style.position = "fixed";
        const btnW = noBtn.offsetWidth;
        const btnH = noBtn.offsetHeight;
        const maxX = window.innerWidth - btnW - 20;
        const maxY = window.innerHeight - 130;
        
        let nX = Math.random() * maxX;
        let nY = Math.random() * maxY;

        noBtn.style.left = nX + "px";
        noBtn.style.top = nY + "px";
        noBtn.style.transform = `rotate(${Math.random() * 20 - 10}deg)`;
    }

    noBtn.addEventListener("mouseover", moveNo);
    noBtn.addEventListener("touchstart", (e) => { e.preventDefault(); moveNo(); });

    opening.onclick = () => {
        opening.classList.add("fade-out");
        mainAudio.src = lagu1;
        mainAudio.loop = true;
        mainAudio.play().catch(e => console.log("Playback error:", e));
    };

    yesBtn.onclick = () => {
        // Ganti Lagu tanpa menghapus elemen audio
        mainAudio.pause();
        mainAudio.src = lagu2;
        mainAudio.load();
        mainAudio.play().catch(() => {
            // Re-try play jika gagal (safari/chrome policy)
            setTimeout(() => mainAudio.play(), 100);
        });

        // Voice
        const voice = new SpeechSynthesisUtterance("Yeay! Tiket kencan berhasil diklaim. Sampai ketemu nanti ya, Aili!");
        voice.lang = "id-ID";
        window.speechSynthesis.speak(voice);

        // Sparks
        for(let i=0; i<12; i++) {
            setTimeout(() => {
                createSparks(Math.random() * window.innerWidth, Math.random() * window.innerHeight, true);
            }, i * 250);
        }

        // Ganti Konten tanpa menghapus Audio
        appWrapper.style.opacity = "0";
        setTimeout(() => {
            appWrapper.innerHTML = `
                <div class="container">
                    <div class="card" style="border: 2px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.15); position: relative; overflow: hidden;">
                        <div style="position: absolute; top: 10px; right: -30px; background: var(--pink); color: white; padding: 5px 40px; transform: rotate(45deg); font-size: 10px; font-weight: bold;">OFFICIAL</div>
                        <h1 style="font-size: 26px; letter-spacing: 2px; margin-bottom: 5px;">DATE TICKET</h1>
                        <p style="font-size: 12px; opacity: 0.8; margin-bottom: 15px;">Valid for: Aili & Hafizh ğŸ’–</p>
                        <div style="border-top: 1px dashed rgba(255,255,255,0.3); margin: 15px 0;"></div>
                        <div style="font-size: 50px; margin: 10px 0;">ğŸ¥°</div>
                        <h2 style="font-size: 20px; margin-top: 10px;">ğŸ¥³ Redeemed Successfully! ğŸ¥³</h2>
                        <p style="margin: 15px 0; font-size: 14px; line-height: 1.6;">Satu tiket jalan bareng sudah aktif. <br>Kabari ya kalau kamu udah siap, Aili!</p>
                        <div style="background: white; color: #120012; padding: 10px; border-radius: 10px; font-family: 'Courier New', monospace; font-weight: bold; margin-top: 10px;">CODE: DATE-WITH-AILI</div>
                        <p style="font-size: 10px; margin-top: 20px; opacity: 0.6;">*Syarat & Ketentuan: Harus Senyum Terus!*</p>
                    </div>
                </div>
                <div class="running"><span>ğŸˆ Cieee yang tiketnya udah aktif! ğŸˆâœ¨ Makasih ya Aili âœ¨ ğŸ’˜ğŸˆ Ditunggu kabarnya âœ¨</span></div>
            `;
            appWrapper.style.opacity = "1";
            startBalloons();
        }, 500);
    };

    function startBalloons() {
        const balloonIcons = ['ğŸˆ', 'ğŸ’–', 'âœ¨'];
        setInterval(() => {
            const b = document.createElement("div");
            b.className = "balloon";
            b.innerHTML = balloonIcons[Math.floor(Math.random() * balloonIcons.length)];
            b.style.left = Math.random() * 100 + "vw";
            b.style.fontSize = (Math.random() * 20 + 20) + "px";
            document.body.appendChild(b);
            
            setTimeout(() => {
                b.style.transition = "transform " + (Math.random() * 3 + 4) + "s linear, opacity 4s ease";
                b.style.transform = `translateY(-120vh) rotate(${Math.random() * 360}deg)`;
                b.style.opacity = "0";
            }, 50);
            setTimeout(() => b.remove(), 7000);
        }, 600);
    }

    // Rain Heart
    setInterval(() => {
        const h = document.createElement("div");
        h.className = "heart-rain"; h.innerHTML = "ğŸ’–";
        h.style.left = Math.random() * 100 + "vw";
        h.style.animationDuration = (Math.random() * 2 + 2) + "s";
        document.body.appendChild(h);
        setTimeout(() => h.remove(), 4000);
    }, 400);
</script>
</body>
</html>
