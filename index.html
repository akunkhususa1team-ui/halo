<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Untuk Aila ğŸ’˜</title>
    <style>
        :root{ --pink:#ff3d7f; --soft:#ff9bbb; --dark:#120012; --card:rgba(255,255,255,.14); }
        *{margin:0;padding:0;box-sizing:border-box}
        html,body{width:100%;height:100%;font-family:"Segoe UI",Arial,sans-serif; overflow:hidden;}
        body{ background:radial-gradient(circle at top,var(--soft),var(--dark)); display:flex; flex-direction:column; color:white; transition: 0.5s; }

        #opening{ position:fixed; inset:0; background:rgba(0,0,0,.9); backdrop-filter:blur(20px); display:grid; place-items:center; font-size:24px; cursor:pointer; z-index:9999; transition:0.8s; }
        .fade-out{opacity:0; pointer-events:none}

        .container{ flex:1; display:flex; align-items:center; justify-content:center; padding:15px; z-index:10; }
        .card{ 
            width:100%; max-width:380px; background:var(--card); backdrop-filter:blur(15px); 
            border-radius:30px; padding:25px 20px; text-align:center; 
            box-shadow:0 20px 50px rgba(0,0,0,0.3); border:1px solid rgba(255,255,255,0.1);
            position: relative; z-index: 100;
        }

        .photo-wrapper { width: 180px; height: 180px; margin: 0 auto; position: relative; z-index: 110; transition: 0.6s; }
        .photo { width: 100%; height: 100%; border-radius: 20px; object-fit: cover; box-shadow: 0 0 25px var(--pink); cursor: pointer; }
        .is-portrait { width: 240px !important; height: 320px !important; }

        h2#question { font-size: 18px; font-weight: 400; margin: 20px 0; }
        .buttons { position: relative; width: 100%; height: 80px; display: flex; justify-content: center; align-items: center; gap: 20px; }

        button { padding: 12px 25px; border-radius: 15px; border: none; cursor: pointer; font-weight: bold; font-size: 16px; touch-action: manipulation; }
        #yesBtn { background: var(--pink); color: white; box-shadow: 0 5px 15px var(--pink); z-index: 1000; position: relative; }
        #noBtn { background: #444; color: white; z-index: 999; position: relative; }

        .sparkle { position: fixed; pointer-events: none; z-index: 2000; animation: fly 1s forwards; font-size: 20px; }
        @keyframes fly {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
            100% { transform: translate(calc(-50% + var(--x)), calc(-50% + var(--y))) scale(1.6); opacity: 0; }
        }

        .running { background: var(--pink); padding: 12px 0; overflow: hidden; white-space: nowrap; flex-shrink: 0; position: relative; z-index: 100; }
        .running span { display: inline-block; padding-left: 100%; animation: scroll 20s linear infinite; font-weight: bold; }
        @keyframes scroll { to { transform: translateX(-100%); } }
        
        .heart-rain { position: fixed; top: -20px; animation: fall linear forwards; pointer-events: none; z-index: 5; }
        @keyframes fall { to { transform: translateY(110vh); opacity: 0; } }
    </style>
</head>
<body>

    <div id="opening">âœ¨ Klik untuk Aila âœ¨</div>
    <div id="dismiss-overlay" style="position:fixed; inset:0; display:none; z-index:50;"></div>

    <div class="container">
        <div class="card">
            <h1>Untuk Aila ğŸ’–</h1>
            <div class="photo-wrapper" id="pWrapper">
                <img src="foto.jpg" class="photo" id="mainPhoto" alt="Aila">
            </div>
            <h2 id="question">Mau jalan sama aku nggak? ğŸ¥º</h2>
            <div class="buttons">
                <button id="yesBtn">Yes ğŸ˜</button>
                <button id="noBtn">No ğŸ˜œ</button>
            </div>
        </div>
    </div>

    <div class="running">
        <span>ğŸ’˜ ini sebenernya so so an so sweet aja ğŸ’˜ Happy Valentine ğŸ’˜ ini cuma iseng iseng bikin gini an wkwk ğŸ’˜</span>
    </div>

    <audio id="music" loop preload="auto"><source src="Timur.mp3" type="audio/mpeg"></audio>
    <audio id="music2" preload="auto"><source src="MyEverything.mp3" type="audio/mpeg"></audio>

<script>
    const noBtn = document.getElementById("noBtn");
    const yesBtn = document.getElementById("yesBtn");
    const pWrapper = document.getElementById("pWrapper");
    const photo = document.getElementById("mainPhoto");
    const opening = document.getElementById("opening");
    const music = document.getElementById("music");
    const music2 = document.getElementById("music2");
    const overlay = document.getElementById("dismiss-overlay");

    function createSparks(x, y, isFirework = false) {
        const particles = isFirework ? ['ğŸ’¥', 'âœ¨', 'ğŸ’–', 'â­'] : ['âœ¨', 'â­', 'ğŸ’–', 'ğŸŒ¸'];
        for (let i = 0; i < (isFirework ? 20 : 12); i++) {
            const s = document.createElement('div');
            s.className = 'sparkle';
            s.innerHTML = particles[Math.floor(Math.random() * particles.length)];
            s.style.left = x + 'px'; s.style.top = y + 'px';
            const angle = Math.random() * Math.PI * 2;
            const dist = isFirework ? (Math.random() * 200 + 50) : (Math.random() * 100 + 50);
            s.style.setProperty('--x', Math.cos(angle) * dist + 'px');
            s.style.setProperty('--y', Math.sin(angle) * dist + 'px');
            document.body.appendChild(s);
            setTimeout(() => s.remove(), 1000);
        }
    }

    photo.onclick = (e) => {
        const isZoomed = pWrapper.classList.toggle("is-portrait");
        overlay.style.display = isZoomed ? "block" : "none";
        createSparks(e.clientX, e.clientY);
    };

    overlay.onclick = () => {
        pWrapper.classList.remove("is-portrait");
        overlay.style.display = "none";
    };

    function moveNo() {
        noBtn.style.position = "fixed";
        const btnW = noBtn.offsetWidth;
        const btnH = noBtn.offsetHeight;
        const maxX = window.innerWidth - btnW - 20;
        const maxY = window.innerHeight - 130;
        
        const yesRect = yesBtn.getBoundingClientRect();
        const photoRect = pWrapper.getBoundingClientRect();

        let nX, nY, overlap = true;
        while (overlap) {
            nX = Math.random() * maxX;
            nY = Math.random() * maxY;
            const hitYes = (nX + btnW > yesRect.left - 60 && nX < yesRect.right + 60) &&
                           (nY + btnH > yesRect.top - 60 && nY < yesRect.bottom + 60);
            const hitPhoto = (nX + btnW > photoRect.left && nX < photoRect.right) &&
                             (nY + btnH > photoRect.top && nY < photoRect.bottom);
            if (!hitYes && !hitPhoto && nX > 10 && nY > 10) overlap = false;
        }
        noBtn.style.left = nX + "px";
        noBtn.style.top = nY + "px";
    }

    noBtn.addEventListener("mouseover", moveNo);
    noBtn.addEventListener("touchstart", (e) => { e.preventDefault(); moveNo(); });

    opening.onclick = () => {
        opening.classList.add("fade-out");
        music.play();
        
        // PENTING: Pancing browser agar music2 boleh diputar nanti
        music2.volume = 0;
        music2.play().then(() => {
            music2.pause();
            music2.currentTime = 0;
            music2.volume = 1; // Kembalikan volume normal untuk nanti
        });
    };

    yesBtn.onclick = () => {
        // Matikan music 1
        music.pause();
        music.currentTime = 0;

        // Nyalakan music 2 (My Everything) tepat saat klik
        music2.currentTime = 0;
        music2.play().catch(() => {
            // Backup jika play pertama gagal
            music2.play();
        });

        // Suara Google
        const voice = new SpeechSynthesisUtterance("Yeayyyy! Aila mau jalan sama aku hehehehe");
        voice.lang = "id-ID";
        window.speechSynthesis.speak(voice);

        // Kembang Api Beruntun
        for(let i=0; i<10; i++) {
            setTimeout(() => {
                createSparks(Math.random() * window.innerWidth, Math.random() * window.innerHeight, true);
            }, i * 300);
        }

        document.body.style.opacity = "0";
        setTimeout(() => {
            document.body.innerHTML = `
                <div class="container"><div class="card">
                    <h1>YEAYYY! ğŸ’•</h1>
                    <p style="margin:20px 0; font-size:18px;">Aila mau jalan sama aku! ğŸ˜†ğŸ’˜</p>
                    <p style="font-size:60px;">ğŸ¥°</p>
                </div></div>
                <div class="running"><span>ğŸ’– Assiiikkk seneng banget ğŸ’–ğŸ’– Senyum dikit gapapa si ğŸ˜œğŸ’–</span></div>`;
            document.body.style.opacity = "1";
        }, 500);
    };

    setInterval(() => {
        const h = document.createElement("div");
        h.className = "heart-rain"; h.innerHTML = "ğŸ’–";
        h.style.left = Math.random() * 100 + "vw";
        h.style.animationDuration = (Math.random() * 2 + 2) + "s";
        document.body.appendChild(h);
        setTimeout(() => h.remove(), 4000);
    }, 400);
</script>
</body>
</html>
