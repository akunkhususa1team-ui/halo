<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Untuk Aila ğŸ’˜</title>
    <style>
        :root{ --pink:#ff3d7f; --soft:#ff9bbb; --dark:#120012; --card:rgba(255,255,255,.14); }
        *{margin:0;padding:0;box-sizing:border-box}
        html,body{width:100%;height:100%;font-family:"Segoe UI",Arial,sans-serif; overflow:hidden;}
        body{ background:radial-gradient(circle at top,var(--soft),var(--dark)); display:flex; flex-direction:column; color:white; }

        #opening{ position:fixed; inset:0; background:rgba(0,0,0,.9); backdrop-filter:blur(20px); display:grid; place-items:center; font-size:24px; cursor:pointer; z-index:9999; transition:0.8s; }
        .fade-out{opacity:0; pointer-events:none}

        .container{ flex:1; display:flex; align-items:center; justify-content:center; padding:15px; z-index:10; }
        .card{ 
            width:100%; max-width:380px; background:var(--card); backdrop-filter:blur(15px); 
            border-radius:30px; padding:25px 20px; text-align:center; 
            box-shadow:0 20px 50px rgba(0,0,0,0.3); border:1px solid rgba(255,255,255,0.1);
            position: relative; z-index: 100;
        }

        .photo-wrapper { width: 180px; height: 180px; margin: 0 auto; position: relative; z-index: 110; transition: 0.5s; }
        .photo { width: 100%; height: 100%; border-radius: 20px; object-fit: cover; box-shadow: 0 0 25px var(--pink); cursor: pointer; }
        .is-portrait { width: 240px !important; height: 320px !important; }

        h2#question { font-size: 18px; font-weight: 400; margin: 20px 0; }
        .buttons { position: relative; width: 100%; height: 80px; display: flex; justify-content: center; align-items: center; gap: 20px; }

        button { padding: 12px 25px; border-radius: 15px; border: none; cursor: pointer; font-weight: bold; font-size: 16px; touch-action: manipulation; transition: 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        
        #yesBtn { background: var(--pink); color: white; box-shadow: 0 5px 15px var(--pink); z-index: 1000; position: relative; }
        
        /* NO BUTTON - FIXED AGAR BISA KABUR SE-LAYAR */
        #noBtn { 
            background: #444; color: white; 
            z-index: 999; 
            position: relative; /* Awalnya normal */
        }

        .running { background: var(--pink); padding: 12px 0; overflow: hidden; white-space: nowrap; flex-shrink: 0; position: relative; z-index: 100; }
        .running span { display: inline-block; padding-left: 100%; animation: scroll 20s linear infinite; font-weight: bold; }
        @keyframes scroll { to { transform: translateX(-100%); } }
        
        #dismiss-overlay { position: fixed; inset: 0; z-index: 50; display: none; }
        .heart-rain { position: fixed; top: -20px; animation: fall linear forwards; pointer-events: none; z-index: 5; }
        @keyframes fall { to { transform: translateY(110vh); opacity: 0; } }
    </style>
</head>
<body>

    <div id="opening">âœ¨ Klik untuk Aila âœ¨</div>
    <div id="dismiss-overlay"></div>

    <div class="container">
        <div class="card">
            <h1>Untuk Aila ğŸ’–</h1>
            <div class="photo-wrapper" id="pWrapper">
                <img src="foto.jpg" class="photo" id="mainPhoto" alt="Aila">
            </div>
            <h2 id="question">Mau jalan sama aku nggak? ğŸ¥º</h2>
            <div class="buttons">
                <button id="yesBtn">Yes ğŸ˜</button>
                <button id="noBtn">No ğŸ˜œ</button>
            </div>
        </div>
    </div>

    <div class="running">
        <span>ğŸ’˜ ini sebenernya so so an so sweet aja ğŸ’˜ Happy Valentine yang tidak merayakan aku tidak merayakan valentinenya ğŸ’˜ ini cuma iseng iseng bikin gini an wkwk ğŸ’˜</span>
    </div>

    <audio id="music" loop><source src="Timur.mp3" type="audio/mpeg"></audio>
    <audio id="music2"><source src="MyEverything.mp3" type="audio/mpeg"></audio>

<script>
    const noBtn = document.getElementById("noBtn");
    const yesBtn = document.getElementById("yesBtn");
    const pWrapper = document.getElementById("pWrapper");
    const photo = document.getElementById("mainPhoto");
    const opening = document.getElementById("opening");
    const music = document.getElementById("music");
    const music2 = document.getElementById("music2");

    // FUNGSI KABUR (DEWA MODE)
    function moveNo() {
        noBtn.style.position = "fixed"; // Berubah jadi fixed agar bisa kabur ke seluruh layar
        
        const btnWidth = noBtn.offsetWidth;
        const btnHeight = noBtn.offsetHeight;
        
        // Batas aman layar agar tidak hilang keluar
        const maxX = window.innerWidth - btnWidth - 20;
        const maxY = window.innerHeight - btnHeight - 80; // Sisakan ruang untuk running text
        
        // Dapatkan posisi tombol YES & Foto untuk dihindari
        const yesRect = yesBtn.getBoundingClientRect();
        const photoRect = pWrapper.getBoundingClientRect();
        const safeMargin = 50;

        let newX, newY;
        let isOverlapping = true;

        // Cari koordinat acak sampai nemu yang tidak menabrak element penting
        while (isOverlapping) {
            newX = Math.random() * maxX;
            newY = Math.random() * maxY;

            // Cek tabrakan dengan tombol YES
            const hitYes = (newX + btnWidth > yesRect.left - safeMargin && newX < yesRect.right + safeMargin) &&
                           (newY + btnHeight > yesRect.top - safeMargin && newY < yesRect.bottom + safeMargin);
            
            // Cek tabrakan dengan FOTO
            const hitPhoto = (newX + btnWidth > photoRect.left && newX < photoRect.right) &&
                             (newY + btnHeight > photoRect.top && newY < photoRect.bottom);

            if (!hitYes && !hitPhoto) isOverlapping = false;
        }

        noBtn.style.left = newX + "px";
        noBtn.style.top = newY + "px";
        // Efek miring sedikit biar lucu
        noBtn.style.transform = `rotate(${Math.random() * 20 - 10}deg)`;
    }

    noBtn.addEventListener("mouseover", moveNo);
    noBtn.addEventListener("touchstart", (e) => { e.preventDefault(); moveNo(); });

    // FUNGSI LAINNYA
    photo.onclick = () => pWrapper.classList.toggle("is-portrait");
    
    opening.onclick = () => {
        opening.classList.add("fade-out");
        music.play().catch(() => {});
    };

    yesBtn.onclick = () => {
        music.pause();
        music2.play();
        const voice = new SpeechSynthesisUtterance("Yeayyyy! Aila mau jalan sama aku hehehehe");
        voice.lang = "id-ID";
        window.speechSynthesis.speak(voice);

        document.body.style.opacity = "0";
        setTimeout(() => {
            document.body.innerHTML = `
                <div class="container"><div class="card">
                    <h1>YEAYYY! ğŸ’•</h1>
                    <p style="margin:20px 0; font-size:18px;">Aila mau jalan sama aku! ğŸ˜†ğŸ’˜</p>
                    <p style="font-size:60px;">ğŸ¥°</p>
                </div></div>
                <div class="running"><span>ğŸ’˜ Assiiikkk seneng banget ğŸ’–ğŸ’– Senyum dikit gapapa si ğŸ˜œğŸ’–</span></div>`;
            document.body.style.opacity = "1";
        }, 500);
    };

    // HUJAN HATI
    setInterval(() => {
        const h = document.createElement("div");
        h.className = "heart-rain"; h.innerHTML = "ğŸ’–";
        h.style.left = Math.random() * 100 + "vw";
        h.style.animationDuration = (Math.random() * 2 + 2) + "s";
        document.body.appendChild(h);
        setTimeout(() => h.remove(), 4000);
    }, 400);
</script>
</body>
</html>
