<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Untuk Aila ğŸ’˜</title>
    <style>
        :root{ --pink:#ff3d7f; --soft:#ff9bbb; --dark:#120012; --card:rgba(255,255,255,.14); }
        *{margin:0;padding:0;box-sizing:border-box}
        html,body{width:100%;height:100%;font-family:"Segoe UI",Arial,sans-serif; overflow:hidden; position: relative;}
        body{ background:radial-gradient(circle at top,var(--soft),var(--dark)); display:flex; flex-direction:column; color:white; }

        /* OPENING */
        #opening{ position:fixed; inset:0; background:rgba(0,0,0,.9); backdrop-filter:blur(20px); display:grid; place-items:center; font-size:24px; cursor:pointer; z-index:9999; transition:0.8s; }
        .fade-out{opacity:0; pointer-events:none}

        /* CONTAINER & CARD */
        .container{ flex:1; display:flex; align-items:center; justify-content:center; padding:15px; z-index:10; }
        .card{ 
            width:100%; max-width:380px; background:var(--card); backdrop-filter:blur(15px); 
            border-radius:30px; padding:25px 20px; text-align:center; 
            box-shadow:0 20px 50px rgba(0,0,0,0.3); border:1px solid rgba(255,255,255,0.1);
            position: relative; z-index: 100; transition: all 0.5s ease;
        }

        h1{ font-size:clamp(24px, 7vw, 32px); margin-bottom:15px; }
        
        /* FOTO LOGIC */
        .photo-wrapper { 
            width: 180px; height: 180px; margin: 0 auto; 
            position: relative; transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 110;
        }
        .photo { 
            width: 100%; height: 100%; border-radius: 20px; object-fit: cover; 
            box-shadow: 0 0 25px var(--pink); cursor: pointer;
        }
        /* Style saat foto di-klik (Zoom) */
        .is-portrait { width: 250px; height: 350px; transform: scale(1.1); }

        h2#question { font-size: 18px; font-weight: 400; margin: 20px 0; }
        
        .buttons { position: relative; width: 100%; height: 80px; display: flex; justify-content: center; align-items: center; gap: 20px; }

        button { padding: 12px 25px; border-radius: 15px; border: none; cursor: pointer; font-weight: bold; font-size: 16px; touch-action: manipulation; }
        
        #yesBtn { background: var(--pink); color: white; box-shadow: 0 5px 15px var(--pink); z-index: 1000; position: relative; }
        
        #noBtn { 
            background: #444; color: white; 
            z-index: 999; 
            position: relative;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* RUNNING TEXT */
        .running { background: var(--pink); padding: 12px 0; overflow: hidden; white-space: nowrap; flex-shrink: 0; z-index: 10; }
        .running span { display: inline-block; padding-left: 100%; animation: scroll 25s linear infinite; font-weight: bold; font-size: 14px; }
        @keyframes scroll { to { transform: translateX(-100%); } }
        
        /* OVERLAY UNTUK ZOOM */
        #dismiss-overlay { position: fixed; inset: 0; z-index: 105; display: none; background: rgba(0,0,0,0.2); }

        .heart-rain { position: fixed; top: -20px; animation: fall linear forwards; pointer-events: none; z-index: 5; }
        @keyframes fall { to { transform: translateY(110vh); opacity: 0; } }
    </style>
</head>
<body>

    <div id="opening">âœ¨ Klik untuk Aila âœ¨</div>
    <div id="dismiss-overlay"></div>

    <div class="container">
        <div class="card" id="mainCard">
            <h1>Untuk Aila ğŸ’–</h1>
            <div class="photo-wrapper" id="pWrapper">
                <img src="foto.jpg" class="photo" id="mainPhoto" alt="Aila">
            </div>
            <h2 id="question">Mau jalan sama aku nggak? ğŸ¥º</h2>
            <div class="buttons">
                <button id="yesBtn">Yes ğŸ˜</button>
                <button id="noBtn">No ğŸ˜œ</button>
            </div>
        </div>
    </div>

    <div class="running">
        <span>ğŸ’˜ ini sebenernya so so an so sweet aja ğŸ’˜ Happy Valentine yang tidak merayakan aku tidak merayakan valentinenya ğŸ’˜ ini cuma iseng iseng bikin gini an wkwk ğŸ’˜</span>
    </div>

    <audio id="music" loop><source src="Timur.mp3" type="audio/mpeg"></audio>
    <audio id="music2"><source src="MyEverything.mp3" type="audio/mpeg"></audio>

<script>
    const wrapper = document.getElementById("pWrapper");
    const photo = document.getElementById("mainPhoto");
    const noBtn = document.getElementById("noBtn");
    const yesBtn = document.getElementById("yesBtn");
    const opening = document.getElementById("opening");
    const overlay = document.getElementById("dismiss-overlay");
    const music = document.getElementById("music");
    const music2 = document.getElementById("music2");

    // FUNGSI ZOOM FOTO (FIXED)
    photo.onclick = (e) => {
        e.stopPropagation();
        const isZoomed = wrapper.classList.toggle("is-portrait");
        overlay.style.display = isZoomed ? "block" : "none";
    };

    overlay.onclick = () => {
        wrapper.classList.remove("is-portrait");
        overlay.style.display = "none";
    };

    opening.onclick = () => {
        opening.classList.add("fade-out");
        music.play().catch(e => {});
        music2.play().then(() => { music2.pause(); music2.currentTime = 0; }).catch(e => {});
    };

    // LOGIKA TOMBOL NO KABUR (RESPONSIVE & TETAP DI LAYAR)
    function moveNo() {
        noBtn.style.position = "fixed";
        
        const btnWidth = noBtn.offsetWidth;
        const btnHeight = noBtn.offsetHeight;
        
        // Batas aman layar
        const maxX = window.innerWidth - btnWidth - 20;
        const maxY = window.innerHeight - btnHeight - 20;
        
        const yesRect = yesBtn.getBoundingClientRect();
        const photoRect = wrapper.getBoundingClientRect();
        const safeZone = 80; 

        let randomX, randomY;
        let isSafe = false;

        for(let i=0; i<50; i++) {
            randomX = Math.max(10, Math.random() * maxX);
            randomY = Math.max(10, Math.random() * maxY);

            // Cek agar tidak menabrak tombol YES
            const collisionYes = randomX + btnWidth > yesRect.left - safeZone && randomX < yesRect.right + safeZone;
            const collisionY_Yes = randomY + btnHeight > yesRect.top - safeZone && randomY < yesRect.bottom + safeZone;

            // Cek agar tidak menabrak FOTO (biar fungsi klik foto tidak terganggu)
            const collisionPhoto = randomX + btnWidth > photoRect.left && randomX < photoRect.right;
            const collisionY_Photo = randomY + btnHeight > photoRect.top && randomY < photoRect.bottom;

            if (!(collisionYes && collisionY_Yes) && !(collisionPhoto && collisionY_Photo)) {
                isSafe = true;
                break;
            }
        }

        noBtn.style.left = randomX + "px";
        noBtn.style.top = randomY + "px";
        noBtn.style.transform = `rotate(${Math.floor(Math.random() * 30) - 15}deg) scale(0.95)`;
    }

    noBtn.addEventListener("mouseover", moveNo);
    noBtn.addEventListener("touchstart", (e) => {
        e.preventDefault();
        moveNo();
    });

    // ACTION YES
    yesBtn.onclick = () => {
        document.body.style.opacity = "0";
        music.pause();
        music2.play().catch(e => {});
        
        const voice = new SpeechSynthesisUtterance("Yeayyyy! Aila mau jalan sama aku hehehehe");
        voice.lang = "id-ID";
        window.speechSynthesis.speak(voice);

        setTimeout(() => {
            document.body.innerHTML = `
                <div class="container">
                    <div class="card">
                        <h1>YEAYYY! ğŸ’•</h1>
                        <p style="font-size:18px; color:white; margin:15px 0;">Aila mau jalan sama aku! ğŸ˜†ğŸ’˜</p>
                        <p style="font-size:60px;">ğŸ¥°</p>
                    </div>
                </div>
                <div class="running">
                    <span>ğŸ’˜ ini sebenernya so so an so sweet aja ğŸ’˜ Happy Valentine yang tidak merayakan aku tidak merayakan valentinenya ğŸ’˜ ini cuma iseng iseng bikin gini an wkwk ğŸ’˜</span>
                </div>`;
            document.body.style.opacity = "1";
        }, 500);
    };

    // Hujan Hati
    setInterval(() => {
        const h = document.createElement("div");
        h.className = "heart-rain"; h.innerHTML = "ğŸ’–";
        h.style.left = Math.random() * 100 + "vw";
        h.style.animationDuration = (Math.random() * 2 + 2) + "s";
        document.body.appendChild(h);
        setTimeout(() => h.remove(), 4000);
    }, 400);
</script>
</body>
</html>
